
<!DOCTYPE html>
<html lang="en">

<?php
session_start();
if (isset($_SESSION['user_name'])) {
    $userName = $_SESSION['user_name'];
} else {
    $userName = "Guest"; // Default value if user is not logged in
}
?>

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <!-- Favicons -->
  <link rel="icon" type="image/png" href="assets/img/favicon-32x32.png">


  <title>Settings - GoFit ChatBot</title>
  <meta content="" name="description">
  <meta content="" name="keywords">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.1/dist/css/bootstrap.min.css" rel="stylesheet">

  <style type="text/css">
    body {
      margin-top: 20px;
      background: #F0F8FF;
      font-family: "Roboto", sans-serif; /* Add the font-family property */
    }

    .card {
      margin-bottom: 1.5rem;
      box-shadow: 0 1px 15px 1px rgba(52,40,104,.08);
    }
    .card {
      position: relative;
      display: -ms-flexbox;
      display: flex;
      -ms-flex-direction: column;
      flex-direction: column;
      min-width: 0;
      word-wrap: break-word;
      background-color: #fff;
      background-clip: border-box;
      border: 1px solid #e5e9f2;
      border-radius: .2rem;
    }
    .card-header:first-child {
      border-radius: calc(.2rem - 1px) calc(.2rem - 1px) 0 0;
    }
    .card-header {
      border-bottom-width: 1px;
    }
    .card-header {
      padding: .75rem 1.25rem;
      margin-bottom: 0;
      color: inherit;
      background-color: #fff;
      border-bottom: 1px solid #e5e9f2;
    }
    /* Change the background color and border color of buttons and list selections */
    .list-group-item.active,
    .list-group-item-action.active,
    .btn-primary {
      background-color: #1bbd36 !important;
      border-color: #1bbd36 !important;
    }

    /* Change the text color of buttons to white for better visibility */
    .btn-primary {
      color: white !important;
    }
  </style>

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">


<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.17.0/font/bootstrap-icons.css" rel="stylesheet">


  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top">
    <div class="container d-flex align-items-center">

      <!-- Insert the GoFit logo here -->
      <h1 class="logo me-auto">
        <a href="index.html"> 
          <img src="assets/img/GoFitLogo.png" alt="GoFit Logo"> 
           <span>GoFit<br></span>ChatBot
        </a>
      </h1>

      <nav id="navbar" class="navbar order-last order-lg-0">
        <ul>
          <li><a href="index.html" >Home</a></li>
          <li><a href="chatbot.html">Chatbot</a></li>
          <li><a href="settings.html" class="active">Settings</a></li>
          <li><a href="faqs.html">FAQs</a></li> 
          <li><a href="contact.html">Contact</a></li> 
          <li><a>Hello, <?php echo "  " . $userName; ?></a></li>
          <?php if ($userName === "Guest"): ?>
          <li><a href="/signin/signin.html"><u><i>Sign In</i></u></a></li> 
          <li><a>|</a></li> <!-- Adjust the margin-right to reduce spacing -->
          <li><a href="/signup/signup.html"><u><i>Sign Up</i></u></a></li> 
          <?php endif; ?>
          <?php if ($userName !== "Guest"): ?>
          <li><a href="logout.php" class="logout-button" style="color: red"><u>Logout</u></a></li>
          <?php endif; ?>
      </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->
    </div>
  </header><!-- End Header -->

  <main id="main">

    <!-- ======= Breadcrumbs ======= --><br>
    <section id="breadcrumbs" class="breadcrumbs">
      <div class="container">

        <div class="d-flex justify-content-between align-items-center">
          <h2>Settings</h2>
          <ol>
            <li><a href="index.html"><u>Home</u></a></li>
            <li>Settings</li>
          </ol>
        </div>

      </div>
    </section><!-- End Breadcrumbs -->


    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <div class="container p-0">
        <br><br>
        <div class="row">
            <div class="col-md-5 col-xl-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Profile Settings</h5>
                    </div>
                    <div class="list-group list-group-flush" role="tablist">
                        <a class="list-group-item list-group-item-action active" data-toggle="list" href="#account"
                            role="tab" id="account-tab">
                            Account
                        </a>
                        <a class="list-group-item list-group-item-action" id="privacy-security-tab"
                            data-toggle="list" href="#privacy-security-content" role="tab">
                            Privacy and Security
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-7 col-xl-8">
                <div class="tab-content">
                    <div class="tab-pane fade show active" id="account" role="tabpanel">
                        <div class="card">
                            <div class="card-header">
                                <div class="card-actions float-right">
                                    <div class="dropdown show">
                                        <a href="#" data-toggle="dropdown" data-display="static"></a>
                                        <div class="dropdown-menu dropdown-menu-right"></div>
                                    </div>
                                </div>
                                <h5 class="card-title mb-0">Change Password</h5>
                            </div>
                            <div class="card-body">
                      <form action="settings.php" method="POST">
                        <input type="hidden" name="form_type" value="change_password">
                          <div class="row">
                            <div class="col-md-12">
                              <div class="form-group col-md-12">

                                <label for="password">Current password</label>
                                <button type="button" id="showPasswordBtn">Show</button>
                                <input type="password" placeholder="************" class="form-control" id="password" name="password" value="<?php echo $_SESSION['password']; ?>">
                              </div>
                              <div class="form-group col-md-12">
                                <label for="inputPasswordNew">New password</label>
                                <input type="text" class="form-control" name="new_password" id="inputPasswordNew" >
                              </div>
                              <div class="form-group col-md-12">
                                <label for="inputPasswordNew2">Verify password</label>
                                <input type="text" class="form-control" name="confirm_password" id="inputPasswordNew2" >
                              </div>
                            </div>
                            <div class="col-md-4">
                              <div class="text-center">
                                <div class="mt-2"></div>
                              </div>
                            </div>
                          </div>
                          <button type="submit" class="btn btn-primary">Save changes</button>
                        </form>
                      </div>
                    </div>
                  </div>


                  <div class="card">
                    <div class="card-header">
                      <div class="card-actions float-right">
                        <div class="dropdown show">
                          <a href="#" data-toggle="dropdown" data-display="static"></a>
                          <div class="dropdown-menu dropdown-menu-right"></div>
                        </div>
                      </div>
                      <h5 class="card-title mb-0">Updater User Information</h5>
                    </div>
                    <div class="card-body">
                      <form action="settings.php" method="POST">
                        <input type="hidden" name="form_type" value="update_user_info">
                        <div class="form-row">
                          <div class="form-group col-md-6">
                            <label for="inputUsername">Username</label>
                            <input type="text" class="form-control" id="username" name="username" placeholder="Johndoe23" value="<?php echo $_SESSION['username']; ?>">
                          </div>
                        <div class="form-group col-md-6">
                            <label for="inputFullName">Full Name</label>
                            <input type="text" name="name" class="form-control" id="name" placeholder="John Doe" value="<?php echo $_SESSION['name']; ?>">

                        </div>
                        <div class="form-group col-md-5">
                            <label for="inputEmail4">Email</label>
                            <input type="email" class="form-control" id="email" name="email" placeholder="johndoe@email.com" value="<?php echo $_SESSION['email']; ?>">
                        </div>
                        <div class="form-group col-md-3">
                            <label for="inputWeight">Weight (lb)</label>
                            <input type="number" class="form-control" name="weight" id="weight" placeholder="156" value="<?php echo $_SESSION['weight']; ?>">
                        </div>
                        <div class="form-group col-md-4">
                            <label for="inputDateofbirth">Date Of Birth</label>
                            <input type="date" class="form-control" name="dateofbirth" id="dateofbirth" placeholder="mm/dd/yyyy" value="<?php echo $_SESSION['dateofbirth']; ?>">
                        </div>
                        </div>
                        <div class="form-row">
                          <div class="form-group col-md-6">
                            <label for="meal_preference">Fitness Goal</label>
                            <select id="meal_preference" name="meal_preference" class="form-control">
                              <option value="- Select -" <?php if ($_SESSION['meal_preference'] === "- Select -") echo "selected"; ?>>- Select -</option>
                              <option value="Weight Loss" <?php if ($_SESSION['meal_preference'] === "Weight Loss") echo "selected"; ?>>Weight Loss</option>
                              <option value="Muscle Gain" <?php if ($_SESSION['meal_preference'] === "Muscle Gain") echo "selected"; ?>>Muscle Gain</option>
                              <option value="Endurance" <?php if ($_SESSION['meal_preference'] === "Endurance ") echo "selected"; ?>>Endurance</option>
                              <option value="Balance" <?php if ($_SESSION['meal_preference'] === "Balance ") echo "selected"; ?>>Balance</option>
                              <option value="Nutrition" <?php if ($_SESSION['meal_preference'] === "Nutrition ") echo "selected"; ?>>Nutrition</option>
                              <option value="Stress Reduction" <?php if ($_SESSION['meal_preference'] === "Stress Reduction ") echo "selected"; ?>>Stress Reduction</option>
                              <option value="Body Composition" <?php if ($_SESSION['meal_preference'] === "Body Composition ") echo "selected"; ?>>Body Composition</option>
                              <option value="Weightlifting" <?php if ($_SESSION['meal_preference'] === "Weightlifting ") echo "selected"; ?>>Weightlifting</option>
                              <option value="Bodybuilding" <?php if ($_SESSION['meal_preference'] === "Bodybuilding ") echo "selected"; ?>>Bodybuilding</option>
                              <option value="CrossFit" <?php if ($_SESSION['meal_preference'] === "CrossFit ") echo "selected"; ?>>CrossFit</option>
                            </select>
                          </div>
                          <div class="form-group col-md-4">
                            <label for="gender">Gender</label>
                            <select id="gender" name="gender" class="form-control">
                                <option value="- Select -" <?php if ($_SESSION['gender'] === "- Select -") echo "selected"; ?>>- Select -</option>
                                <option value="Male" <?php if ($_SESSION['gender'] === "Male") echo "selected"; ?>>Male</option>
                                <option value="Female" <?php if ($_SESSION['gender'] === "Female") echo "selected"; ?>>Female</option>
                                <option value="Other" <?php if ($_SESSION['gender'] === "Other") echo "selected"; ?>>Other</option>
                            </select>
                          </div>
                        </div>
                        <button type="submit" class="btn btn-primary">Save changes</button>
                      </form>
                    </div>
                  </div>
              </div>

              <script>
                document.addEventListener('DOMContentLoaded', function () {
                  // Fetch user data from the server
                  fetch('settings.php') // Update the URL as needed
                      .then(response => response.json())
                      .then(data => {
                          if (data) {
                              document.getElementById('name').value = data.name;
                              document.getElementById('username').value = data.username;
                              document.getElementById('email').value = data.email;
                              document.getElementById('weight').value = data.weight;
                              document.getElementById('dateofbirth').value = data.dateofbirth;

                              // Handle the meal_preference and gender fields appropriately
                              const mealPreference = data.meal_preference;
                              const gender = data.gender;

                              // Update the meal_preference and gender fields based on their values
                              // You may need to modify this part to match your HTML structure
                              // For example, for select elements:
                              const mealPreferenceSelect = document.getElementById('meal_preference');
                              mealPreferenceSelect.value = mealPreference;

                              const genderRadios = document.getElementsByName('gender');
                              for (let i = 0; i < genderRadios.length; i++) {
                                  if (genderRadios[i].value === gender) {
                                      genderRadios[i].checked = true;
                                  }
                              }
                          }
                      })
                      .catch(error => {
                          console.error('Error fetching user data:', error);
                      });

                    // Show/Hide Password functionality
                    const passwordInput = document.getElementById('password');
                      const showPasswordBtn = document.getElementById('showPasswordBtn');

                      showPasswordBtn.addEventListener('click', function () {
                        if (passwordInput.type === 'password') {
                          passwordInput.type = 'text';
                          showPasswordBtn.textContent = 'Hide';
                        } else {
                          passwordInput.type = 'password';
                          showPasswordBtn.textContent = 'Show';
                        }
                      });
                    });
                  </script>
               
            
              <div class="tab-pane fade show active" id="privacy-security-content" role="tabpanel">
                  <div class="card">
                      <div class="card-header">
                          <h5 class="card-title mb-0">Privacy and Security</h5>
                      </div>
                      <div class="card-body">
                          <p>
                              Your privacy and security are of utmost importance to us.
                          </p>
                          <p>
                              We are committed to protecting your personal information and providing a secure
                              environment for using our services. Here are some of the measures we take to
                              ensure your privacy and security:
                          </p>
                          <ul>
                              <li>Secure data encryption during transmission.</li>
                              <li>Regular security audits and updates.</li>
                              <li>Strict access controls to protect your data.</li>
                              <li>Transparent privacy policies.</li>
                          </ul>
                          <p>
                              If you have any concerns or questions regarding your privacy and security while
                              using our website, please don't hesitate to contact us.
                          </p>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>

</main>


<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.1/dist/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript">
</script>


  </main><!-- End #main -->
  <br><br><br>
  <!-- ======= Footer ======= -->
  <footer id="footer">

    <div class="footer-top">
      <div class="container">
        <div class="row">

          <div class="col-lg-3 col-md-6 footer-contact">
            <h3>GoFit ChatBot</h3>
            <p>
              3001 S Congress Ave <br>
              Austin, TX 78704<br>
              United States <br><br>
            </p>
          </div>

          <div class="col-lg-2 col-md-6 footer-links">
            <h4>Useful Links</h4>
            <ul>
              <li><i class="bx bx-chevron-right"></i> <a href="index.html">HOME</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="chatbot.html">CHATBOT</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="settings.html"><u>SETTINGS</u></a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="faqs.html">FAQS</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="contact.html">CONTACT</a></li>
            </ul>
          </div>


          <div class="col-lg-4 col-md-6 footer-newsletter">
            <h4>Join Our Newsletter</h4>
            <p>Stay Updated with Health Tips, Exercise Advice, & More!</p>
            <form action="" style="color: black;"  method="post"> 
                <input type="email" name="email"><input type="submit" value="Subscribe">
            </form>
        </div>
        
        

        </div>
      </div>
    </div>

    <div class="container d-md-flex py-4">

      <div class="me-md-auto text-center text-md-start">
        <div class="copyright" style="text-align: center;">
          &copy; Copyright <strong><span>GoFit ChatBot</span></strong>. All Rights Reserved
        </div>
        <div class="credits">
       
        </div>
      </div>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>     