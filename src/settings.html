
<!DOCTYPE html>
<html lang="en">


<?php
session_start();
if (!isset($_SESSION['name'])) {
    // User is not logged in, redirect to the login page or display a message
    header("Location: /signin/signin.html"); // Redirect to the login page
    exit(); // Stop further execution
}

// User is logged in, proceed with rendering the chatbot page
$userName = $_SESSION['name'];
?>

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <!-- Favicons -->
  <link rel="icon" type="image/png" href="assets/img/favicon-32x32.png">


  <title>Settings</title>
  <meta content="" name="description">
  <meta content="" name="keywords">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@4.1.1/dist/css/bootstrap.min.css" rel="stylesheet">

  <style type="text/css">
    body {
      margin-top: 20px;
      background: #F0F8FF;
      font-family: "Roboto", sans-serif; /* Add the font-family property */
    }

    .card {
      margin-bottom: 1.5rem;
      box-shadow: 0 1px 15px 1px rgba(52,40,104,.08);
    }
    .card {
      position: relative;
      display: -ms-flexbox;
      display: flex;
      -ms-flex-direction: column;
      flex-direction: column;
      min-width: 0;
      word-wrap: break-word;
      background-color: #fff;
      background-clip: border-box;
      border: 1px solid #e5e9f2;
      border-radius: .2rem;
    }
    .card-header:first-child {
      border-radius: calc(.2rem - 1px) calc(.2rem - 1px) 0 0;
    }
    .card-header {
      border-bottom-width: 1px;
    }
    .card-header {
      padding: .75rem 1.25rem;
      margin-bottom: 0;
      color: inherit;
      background-color: #fff;
      border-bottom: 1px solid #e5e9f2;
    }
    /* Change the background color and border color of buttons and list selections */
    .list-group-item.active,
    .list-group-item-action.active,
    .btn-primary {
      background-color: #1bbd36 !important;
      border-color: #1bbd36 !important;
    }

    /* Change the text color of buttons to white for better visibility */
    .btn-primary {
      color: white !important;
    }
  </style>

  <!-- Favicons -->
  <link href="assets/img/favicon.png" rel="icon">
  <link href="assets/img/apple-touch-icon.png" rel="apple-touch-icon">

  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">


<link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.17.0/font/bootstrap-icons.css" rel="stylesheet">


  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top">
    <div class="container d-flex align-items-center">

      <!-- Insert the GoFit logo here -->
      <h1 class="logo me-auto">
        <a href="index.html"> 
          <img src="assets/img/GoFitLogo.png" alt="GoFit Logo"> 
           <span>GoFit<br></span>ChatBot
        </a>
      </h1>

      <nav id="navbar" class="navbar order-last order-lg-0">
        <ul>
          <li><a href="index.html" >Home</a></li>
          <li><a href="chatbot.html">Chatbot</a></li>
          <li><a href="settings.html" class="active">Settings</a></li>
          <li><a href="faqs.html">FAQs</a></li> 
          <li><a href="contact.html">Contact</a></li> 
          <li><a>Hello, <?php echo "  " . $userName; ?></a></li>
          <?php if ($userName === "Guest"): ?>
          <li><a href="/signin/signin.html"><u><i>Sign In</i></u></a></li> 
          <li><a>|</a></li> <!-- Adjust the margin-right to reduce spacing -->
          <li><a href="/signup/signup.html"><u><i>Sign Up</i></u></a></li> 
          <?php endif; ?>
          <?php if ($userName !== "Guest"): ?>
          <li><a href="logout.php" class="logout-button" style="color: red"><u>Logout</u></a></li>
          <?php endif; ?>
      </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->
    </div>
  </header><!-- End Header -->

  <main id="main">

    <!-- ======= Breadcrumbs ======= --><br>
    <section id="breadcrumbs" class="breadcrumbs">
      <div class="container">

        <div class="d-flex justify-content-between align-items-center">
          <h2>Settings</h2>
          <ol>
            <li><a href="index.html"><u>Home</u></a></li>
            <li>Settings</li>
          </ol>
        </div>

      </div>
    </section><!-- End Breadcrumbs -->


    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css" rel="stylesheet" />
    <div class="container p-0">
        <br><br>
        <div class="row">
            <div class="col-md-5 col-xl-4">
                <div class="card">
                    <div class="card-header">
                        <h5 class="card-title mb-0">Profile Settings</h5>
                    </div>
                    <div class="list-group list-group-flush" role="tablist">
                        <a class="list-group-item list-group-item-action active" data-toggle="list" href="#account"
                            role="tab" id="account-tab">
                            Account
                        </a>
                        <a class="list-group-item list-group-item-action" id="privacy-security-tab"
                            data-toggle="list" href="#privacy-security-content" role="tab">
                            Privacy and Security
                        </a>
                    </div>
                </div>
            </div>

            <div class="col-md-7 col-xl-8">
              <div class="tab-content">
                <div class="card">
                  <div class="card-header">
                    <div class="card-actions float-right">
                      <div class="dropdown show">
                        <a href="#" data-toggle="dropdown" data-display="static"></a>
                        <div class="dropdown-menu dropdown-menu-right"></div>
                      </div>
                    </div>
                    <h5 class="card-title mb-0">Update User Information</h5>
                  </div>
                  <div class="card-body">

                                          <!-- Alert for success message -->
                        <div class="alert alert-success" id="success-alert" style="display: none;">
                          User information updated successfully.
                        </div>


                                        <!-- Alert for error message -->
                    <div class="alert alert-danger" id="error-alert" style="display: none;">
                      Error updating user information. Please try again.
                    </div>


                    <form id="user-info-form" action="settings.php" method="POST">
                      <input type="hidden" name="form_type" value="update_user_info">
                      <div class="form-row">
                        <div class="form-group col-md-5">
                          <label for="name">Full Name</label>
                          <input type="text" name="name" class="form-control" id="name" placeholder="John Doe" value="" required>
                        </div>
                        <div class="form-group col-md-4">
                          <label for="email">Email</label>
                          <input type="email" class="form-control" id="email" name="email" placeholder="johndoe@email.com" value="" required>
                        </div>
                        <div class="form-group col-md-3">
                          <label for="weight">Weight (lb)</label>
                          <input type="number" class="form-control" name="weight" id="weight" placeholder="156" value="" required>
                        </div>
                        <div class="form-group col-md-4">
                          <label for="dateofbirth">Date Of Birth</label>
                          <input type="date" class="form-control" name="dateofbirth" id="dateofbirth" placeholder="mm/dd/yyyy" value="" required>
                        </div>
                        <div class="form-group col-md-4">
                          <label for="meal_preference">Fitness Goal</label>
                          <select id="meal_preference" name="meal_preference" class="form-control" required>
                            <option value="- Select -">- Select -</option>
                            <option value="Weight Loss">Weight Loss</option>
                            <option value="Muscle Gain">Muscle Gain</option>
                            <option value="Endurance">Endurance</option>
                            <option value="Balance">Balance</option>
                            <option value="Nutrition">Nutrition</option>
                            <option value="Stress Reduction">Stress Reduction</option>
                            <option value="Body Composition">Body Composition</option>
                            <option value="Weightlifting">Weightlifting</option>
                            <option value="Bodybuilding">Bodybuilding</option>
                            <option value="CrossFit">CrossFit</option>
                          </select>
                        </div>
                        <div class="form-group col-md-4">
                          <label for="gender">Gender</label>
                          <select id="gender" name="gender" class="form-control" required>
                            <option value="- Select -">- Select -</option>
                            <option value="Male">Male</option>
                            <option value="Female">Female</option>
                            <option value="Other">Other</option>
                          </select>
                        </div>
                      </div>
                      <br>
                      <button type="submit" class="btn btn-primary">Save changes</button>
                    </form>
                  </div>
                </div>
              </div>
            </div>
            <script>
              document.addEventListener('DOMContentLoaded', function () {
                // Fetch user data from the server
                fetch('settings.php', { method: 'GET' })
                  .then(response => response.json())
                  .then(data => {
                    if (data) {
                      // Update your form fields with the fetched data here
                      document.getElementById('name').value = data.name;
                      document.getElementById('email').value = data.email;
                      document.getElementById('dateofbirth').value = data.dateofbirth;
                      document.getElementById('gender').value = data.gender;
                      document.getElementById('meal_preference').value = data.meal_preference;
                      document.getElementById('weight').value = data.weight;
                    }
                  })
                  .catch(error => {
                    console.error('Error fetching user data:', error);
                  });
            
                // Handle form submission with AJAX (if needed)
                const userInfoForm = document.getElementById('user-info-form');
                userInfoForm.addEventListener('submit', async function (event) {
                  event.preventDefault();
                  const formData = new FormData(this);
            
                  // Send the form data to settings.php using AJAX
                  fetch('settings.php', {
                    method: 'POST',
                    body: formData
                  })
                    .then(response => response.json())
                    .then(response => {
                      if (response.success) {
                        // Show success alert
                        document.getElementById('success-alert').style.display = 'block';
                        document.getElementById('error-alert').style.display = 'none';
            
                        // Optionally, you can update the user data on the chatbot page without a redirect
                        const updatedUserData = {
                          name: document.getElementById('name').value,
                          email: document.getElementById('email').value,
                          dateofbirth: document.getElementById('dateofbirth').value,
                          gender: document.getElementById('gender').value,
                          meal_preference: document.getElementById('meal_preference').value,
                          weight: parseFloat(document.getElementById('weight').value),
                        };
            
                        // Convert the object to a JSON string
                        const updatedUserDataJson = JSON.stringify(updatedUserData);
            
                        // Store the updated user data in a JavaScript variable or local storage
                        // for use on the chatbot page (without a redirect)
                        window.updatedUserData = updatedUserDataJson;
                      } else {
                        // Show error alert
                        document.getElementById('success-alert').style.display = 'none';
                        document.getElementById('error-alert').style.display = 'block';
                      }
                    })
                    .catch(error => {
                      console.error('Error submitting form:', error);
                      // Show error alert
                      document.getElementById('success-alert').style.display = 'none';
                      document.getElementById('error-alert').style.display = 'block';
                    });
                });
              });
            </script>

            
              <div class="tab-pane fade show active" id="privacy-security-content" role="tabpanel">
                  <div class="card">
                      <div class="card-header">
                          <h5 class="card-title mb-0">Privacy and Security</h5>
                      </div>
                      <div class="card-body">
                          <p>
                              Your privacy and security are of utmost importance to us.
                          </p>
                          <p>
                              We are committed to protecting your personal information and providing a secure
                              environment for using our services. Here are some of the measures we take to
                              ensure your privacy and security:
                          </p>
                          <ul>
                              <li>Secure data encryption during transmission.</li>
                              <li>Regular security audits and updates.</li>
                              <li>Strict access controls to protect your data.</li>
                              <li>Transparent privacy policies.</li>
                          </ul>
                          <p>
                              If you have any concerns or questions regarding your privacy and security while
                              using our website, please don't hesitate to contact us.
                          </p>
                      </div>
                  </div>
              </div>
          </div>
      </div>
  </div>
</div>

</main>


<script src="https://code.jquery.com/jquery-1.10.2.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.1.1/dist/js/bootstrap.bundle.min.js"></script>
<script type="text/javascript">
</script>


  </main><!-- End #main -->
  <br><br><br>
  <!-- ======= Footer ======= -->
  <footer id="footer">

    <div class="footer-top">
      <div class="container">
        <div class="row">

          <div class="col-lg-3 col-md-6 footer-contact">
            <h3>GoFit ChatBot</h3>
            <p>
              3001 S Congress Ave <br>
              Austin, TX 78704<br>
              United States <br><br>
            </p>
          </div>

          <div class="col-lg-2 col-md-6 footer-links">
            <h4>Useful Links</h4>
            <ul>
              <li><i class="bx bx-chevron-right"></i> <a href="index.html">HOME</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="chatbot.html">CHATBOT</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="settings.html"><u>SETTINGS</u></a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="faqs.html">FAQS</a></li>
              <li><i class="bx bx-chevron-right"></i> <a href="contact.html">CONTACT</a></li>
            </ul>
          </div>


          <div class="col-lg-4 col-md-6 footer-newsletter">
            <h4>Our Mission</h4>
            <p>At GoFit ChatBot, our mission is to empower individuals on their journey to better health and fitness. 
              We believe that everyone deserves accessible and personalized guidance to achieve their wellness goals. 
              Our chatbot serves as your trusted companion, providing you with the knowledge, motivation, and support 
              needed to kickstart and sustain a healthier lifestyle.</p>
        </div>
        
        

        </div>
      </div>
    </div>

    <div class="container d-md-flex py-4">

      <div class="me-md-auto text-center text-md-start">
        <div class="copyright" style="text-align: center;">
          Copyright &copy; 2023 <strong><span>GoFit ChatBot</span></strong>. All Rights Reserved
        </div>
        <div class="credits">
       
        </div>
      </div>
    </div>
  </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>     