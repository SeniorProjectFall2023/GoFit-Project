
<!DOCTYPE html>
<html lang="en">

<?php
session_start();
if (isset($_SESSION['user_name'])) {
    $userName = $_SESSION['user_name'];
} else {
    $userName = "Guest"; // Default value if user is not logged in
}
?>


<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">

  <title>ChatBot - GoFit ChatBot</title>
  <meta content="" name="description">
  <meta content="" name="keywords">

 <!-- Favicons -->
 <link rel="icon" type="image/png" href="assets/img/favicon-32x32.png">


  <!-- Google Fonts -->
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,300i,400,400i,600,600i,700,700i|Roboto:300,300i,400,400i,500,500i,600,600i,700,700i|Poppins:300,300i,400,400i,500,500i,600,600i,700,700i" rel="stylesheet">

  <!-- Vendor CSS Files -->
  <link href="assets/vendor/animate.css/animate.min.css" rel="stylesheet">
  <link href="assets/vendor/aos/aos.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">
  <link href="assets/vendor/bootstrap-icons/bootstrap-icons.css" rel="stylesheet">
  <link href="assets/vendor/boxicons/css/boxicons.min.css" rel="stylesheet">
  <link href="assets/vendor/glightbox/css/glightbox.min.css" rel="stylesheet">
  <link href="assets/vendor/remixicon/remixicon.css" rel="stylesheet">
  <link href="assets/vendor/swiper/swiper-bundle.min.css" rel="stylesheet">

  <!-- Template Main CSS File -->
  <link href="assets/css/style.css" rel="stylesheet">

  <!-- =======================================================
  * Template Name: Company
  * Updated: Aug 30 2023 with Bootstrap v5.3.1
  * Template URL: https://bootstrapmade.com/company-free-html-bootstrap-template/
  * Author: BootstrapMade.com
  * License: https://bootstrapmade.com/license/
  ======================================================== -->

      <style>
        body {
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            margin: 0;
        }

        #chatbot-container {
            flex: 1;
            border: 1px solid #ccc;
            padding: 10px;
            max-width: 400px;
            margin: 0 auto;
            background-color: #f8f8f8;
        }

        .message {
            margin: 5px;
            padding: 5px;
            background-color: #fff;
            border: 1px solid #ddd;
            border-radius: 5px;
        }

        .user {
            text-align: right;
        }

        .chatbot {
            text-align: left;
        }

        /* Sticky footer styles */
        footer {
            margin-top: auto;
        }
    </style>

</head>

<body>

  <!-- ======= Header ======= -->
  <header id="header" class="fixed-top">
    <div class="container d-flex align-items-center">

      <!-- Insert the GoFit logo here -->
      <h1 class="logo me-auto">
        <a href="index.html"> 
          <img src="assets/img/GoFitLogo.png" alt="GoFit Logo"> 
           <span>GoFit<br></span>ChatBot
        </a>
      </h1>

      <nav id="navbar" class="navbar order-last order-lg-0">
        <ul>
          <li><a href="index.html">Home</a></li>
          <li><a href="chatbot.html" class="active">Chatbot</a></li>
          <li><a href="settings.html">Settings</a></li>
          <li><a href="faqs.html">FAQs</a></li> 
          <li><a href="contact.html">Contact</a></li> 
          <li><a>Hello, <?php echo "  " . $userName; ?></a></li>
          <?php if ($userName === "Guest"): ?>
          <li><a href="/signin/signin.html"><u><i>Sign In</i></u></a></li> 
          <li><a>|</a></li> <!-- Adjust the margin-right to reduce spacing -->
          <li><a href="/signup/signup.html"><u><i>Sign Up</i></u></a></li> 
          <?php endif; ?>
          <?php if ($userName !== "Guest"): ?>
          <li><a href="logout.php" class="logout-button" style="color: red"><u>Logout</u></a></li>
          <?php endif; ?>
      </ul>
        <i class="bi bi-list mobile-nav-toggle"></i>
      </nav><!-- .navbar -->
    </div>
  </header><!-- End Header -->


  <main id="main">
  <br>

<!-- ======= Breadcrumbs ======= -->
<section id="breadcrumbs" class="breadcrumbs">
  <div class="container">
    <div class="d-flex justify-content-between align-items-center">
      <h2>Chatbot</h2>
      <ol>
        <li><a href="index.html"><u>Home</u></a></li>
        <li>Chatbot</li>
      </ol>
    </div>
  </div>
</section><!-- End Breadcrumbs -->

     <!-- ======= Services Section ======= -->
  <section id="services" class="services section-bg">
    
              <!-- Add the chatbot container -->
        <div id="chatbot-container">
            <div id="chatbot-messages"></div>
            <input type="text" id="user-input" placeholder="Type your message...">
            <button id="send-button">Send</button>
        </div>

        <script>
              // Define your OpenAI API key
            const apiKey = "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";

            // Function to get an OpenAI response
            async function getOpenAIResponse(messages) {
              try {
                const response = await fetch("https://api.openai.com/v1/engines/gpt-3.5-turbo/completions", {
                  method: "POST",
                  headers: {
                    "Content-Type": "application/json",
                    "Authorization": `Bearer ${apiKey}`,
                  },
                  body: JSON.stringify({
                    messages: messages,
                    max_tokens: 100,
                  }),
                });

                if (!response.ok) {
                  throw new Error(`Error calling OpenAI API: ${response.status} - ${response.statusText}`);
                }

                const data = await response.json();
                return data.choices[0].message.content;
              } catch (error) {
                console.error("Error calling OpenAI API:", error);
                return null;
              }
            }

            document.addEventListener("DOMContentLoaded", function () {
              const chatbotMessages = document.getElementById("chatbot-messages");
              const userInput = document.getElementById("user-input");
              const sendButton = document.getElementById("send-button");

              sendButton.addEventListener("click", () => {
                const userMessage = userInput.value;
                if (userMessage.trim() !== "") {
                  appendMessage(userMessage, "user");
                  userInput.value = "";

                  // Call the getOpenAIResponse function to get a response from OpenAI
                  getOpenAIResponse([{ role: "system", content: "You are a helpful health and fitness assistant." }, { role: "user", content: userMessage }])
                    .then((chatbotResponse) => {
                      if (chatbotResponse) {
                        appendMessage(chatbotResponse, "chatbot");
                      } else {
                        console.log("Failed to get a response from OpenAI.");
                      }
                    });
                }
              });

              // Function to append a message to the chat
              function appendMessage(text, sender) {
                const messageDiv = document.createElement("div");
                messageDiv.className = `message ${sender}`;
                messageDiv.innerText = text;
                chatbotMessages.appendChild(messageDiv);
                chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
              }
            });

        </script>
    </main><!-- End #main -->

      </div>
    </section><!-- End Services Section -->

    
  </main><!-- End #main -->

    <!-- ======= Footer ======= -->
    <footer id="footer">

      <div class="footer-top">
        <div class="container">
          <div class="row">
  
            <div class="col-lg-3 col-md-6 footer-contact">
              <h3>GoFit ChatBot</h3>
              <p>
                3001 S Congress Ave <br>
                Austin, TX 78704<br>
                United States <br><br>
              </p>
            </div>
  
            <div class="col-lg-2 col-md-6 footer-links">
              <h4>Useful Links</h4>
  
              <ul>
                <li><i class="bx bx-chevron-right"></i> <a href="index.html">HOME</a></li>
                <li><i class="bx bx-chevron-right"></i> <a href="chatbot.html"><u>CHATBOT</u></a></li>
                <li><i class="bx bx-chevron-right"></i> <a href="settings.html">SETTINGS</a></li>
                <li><i class="bx bx-chevron-right"></i> <a href="faqs.html">FAQS</a></li>
                <li><i class="bx bx-chevron-right"></i> <a href="contact.html">CONTACT</a></li>
              </ul>
  
            </div>
  
            <!-- <div class="col-lg-3 col-md-6 footer-links">
              <h4>Our Services</h4>
              <ul>
                <li><i class="bx bx-chevron-right"></i> <a href="#">Web Design</a></li>
                <li><i class="bx bx-chevron-right"></i> <a href="#">Web Development</a></li>
                <li><i class="bx bx-chevron-right"></i> <a href="#">Product Management</a></li>
                <li><i class="bx bx-chevron-right"></i> <a href="#">Marketing</a></li>
                <li><i class="bx bx-chevron-right"></i> <a href="#">Graphic Design</a></li>
              </ul>
            </div> -->
            <div class="col-lg-4 col-md-6 footer-newsletter">
              <h4>Join Our Newsletter</h4>
              <p>Stay Updated with Health Tips, Exercise Advice, & More!</p>
              <form action="" style="color: black;"  method="post"> 
                  <input type="email" name="email"><input type="submit" value="Subscribe">
              </form>
          </div>
          
          
  
          </div>
        </div>
      </div>
  
      <div class="container d-md-flex py-4">
  
        <div class="me-md-auto text-center text-md-start">
          <div class="copyright" style="text-align: center;">
            &copy; Copyright <strong><span>GoFit ChatBot</span></strong>. All Rights Reserved
          </div>
          <div class="credits">
            <!-- All the links in the footer should remain intact. -->
            <!-- You can delete the links only if you purchased the pro version. -->
            <!-- Licensing information: https://bootstrapmade.com/license/ -->
            <!-- Purchase the pro version with working PHP/AJAX contact form: https://bootstrapmade.com/company-free-html-bootstrap-template/ -->
          </div>
        </div>
      </div>
    </footer><!-- End Footer -->

  <a href="#" class="back-to-top d-flex align-items-center justify-content-center"><i class="bi bi-arrow-up-short"></i></a>

  <!-- Vendor JS Files -->
  <script src="assets/vendor/aos/aos.js"></script>
  <script src="assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
  <script src="assets/vendor/glightbox/js/glightbox.min.js"></script>
  <script src="assets/vendor/isotope-layout/isotope.pkgd.min.js"></script>
  <script src="assets/vendor/swiper/swiper-bundle.min.js"></script>
  <script src="assets/vendor/waypoints/noframework.waypoints.js"></script>
  <script src="assets/vendor/php-email-form/validate.js"></script>

  <!-- Template Main JS File -->
  <script src="assets/js/main.js"></script>

</body>

</html>